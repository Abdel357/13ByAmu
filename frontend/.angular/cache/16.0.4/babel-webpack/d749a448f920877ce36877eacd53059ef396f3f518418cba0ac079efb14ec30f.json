{"ast":null,"code":"import { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/payment.service\";\nimport * as i3 from \"src/app/services/connection.service\";\nimport * as i4 from \"ngx-toastr\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"../navbar/navbar.component\";\nexport class PaymentComponent {\n  constructor(route, paymentService, router, connectionService, toastr) {\n    this.route = route;\n    this.paymentService = paymentService;\n    this.router = router;\n    this.connectionService = connectionService;\n    this.toastr = toastr;\n    this.cardNumberValidator = control => {\n      const value = control.value;\n      if (value && value.length !== 16) {\n        return {\n          lengthError: true\n        };\n      }\n      return null;\n    };\n  }\n  ngOnInit() {\n    this.connectionService.isUserLoggedIn$.subscribe(loggedIn => this.isLoggedIn = loggedIn);\n    if (this.isLoggedIn == false) {\n      this.router.navigate([\"/accueil\"]);\n    }\n    this.route.params.subscribe(params => {\n      this.idTerrain = Number(params[\"idTerrain\"]);\n      this.dateReservation = params[\"dateReservation\"];\n      this.startTime = params[\"startTime\"];\n      this.endTime = params[\"endTime\"];\n      this.paymentForm = new FormGroup({\n        idTerrain: new FormControl(this.idTerrain),\n        dateReservation: new FormControl(this.dateReservation),\n        startTime: new FormControl(this.startTime),\n        endTime: new FormControl(this.endTime),\n        holderName: new FormControl(\"\", [Validators.required]),\n        cardNumber: new FormControl(\"\", [Validators.required, this.cardNumberValidator]),\n        expMonth: new FormControl(\"\", [Validators.required, Validators.min(1), Validators.max(12)]),\n        expYear: new FormControl(\"\", [Validators.required, Validators.min(2023), Validators.max(2050)]),\n        cvv: new FormControl(\"\", [Validators.required, Validators.pattern(/^\\d{3,4}$/)])\n      });\n    });\n  }\n  submitPayment() {\n    if (this.paymentForm.invalid) {\n      if (!this.paymentForm.controls[\"holderName\"].value || !this.paymentForm.controls[\"cardNumber\"].value || !this.paymentForm.controls[\"expMonth\"].value || !this.paymentForm.controls[\"expYear\"].value || !this.paymentForm.controls[\"cvv\"].value) {\n        this.toastr.error(\"Veuillez remplir toutes les entrées\", \"\");\n      } else if (this.paymentForm.controls[\"cardNumber\"].errors) {\n        this.toastr.error(\"Le numéro de carte doit contenir 16 chiffres\", \"\");\n      } else if (this.paymentForm.controls[\"expMonth\"].errors) {\n        this.toastr.error(\"Le mois doit être compris entre 1 et 12\", \"\");\n      } else if (this.paymentForm.controls[\"expYear\"].errors) {\n        this.toastr.error(\"L'année doit être comprise entre 2023 et 2050\", \"\");\n      } else if (this.paymentForm.controls[\"cvv\"].errors) {\n        this.toastr.error(\"CVV doit contenir 3 ou 4 chiffres\", \"\");\n      }\n      return;\n    }\n    const value = this.paymentForm.value;\n    this.paymentService.confirmPayment(value).subscribe(res => {\n      if (res.success) {\n        this.router.navigate([res.redirectUrl]);\n        this.toastr.success(\"Paiement validé!\", \"Succès\");\n      }\n    });\n  }\n  restrictToNumbers(event) {\n    const input = event.target;\n    input.value = input.value.replace(/[^0-9]/g, \"\");\n  }\n  restrictToAlphabets(event) {\n    const input = event.target;\n    const sanitizedValue = input.value.replace(/[^a-zA-Z\\s]/g, \"\");\n    input.value = sanitizedValue;\n  }\n}\nPaymentComponent.ɵfac = function PaymentComponent_Factory(t) {\n  return new (t || PaymentComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.PaymentService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i3.ConnectionService), i0.ɵɵdirectiveInject(i4.ToastrService));\n};\nPaymentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PaymentComponent,\n  selectors: [[\"app-payment\"]],\n  decls: 33,\n  vars: 1,\n  consts: [[1, \"payment-container\"], [\"action\", \"/payment/:idReservation\", \"method\", \"post\", 1, \"payment-form\", 3, \"formGroup\", \"submit\"], [1, \"form-group\"], [\"for\", \"card-holder\"], [1, \"input-container\"], [\"type\", \"text\", \"id\", \"card-holder\", \"name\", \"cardHolder\", \"formControlName\", \"holderName\", \"required\", \"\", 3, \"input\"], [1, \"fas\", \"fa-user\"], [\"for\", \"card-number\"], [\"type\", \"text\", \"id\", \"card-number\", \"name\", \"cardNumber\", \"maxlength\", \"16\", \"formControlName\", \"cardNumber\", \"required\", \"\", 3, \"input\"], [1, \"fas\", \"fa-credit-card\"], [\"for\", \"exp-date\"], [\"type\", \"text\", \"id\", \"exp-month\", \"name\", \"expMonth\", \"placeholder\", \"MM\", \"maxlength\", \"2\", \"formControlName\", \"expMonth\", \"required\", \"\", 3, \"input\"], [\"type\", \"text\", \"id\", \"exp-year\", \"name\", \"expYear\", \"placeholder\", \"YYYY\", \"maxlength\", \"4\", \"formControlName\", \"expYear\", \"required\", \"\", 3, \"input\"], [1, \"fas\", \"fa-calendar-alt\"], [\"for\", \"cvv\"], [\"type\", \"text\", \"id\", \"cvv\", \"name\", \"cvv\", \"formControlName\", \"cvv\", \"maxlength\", \"4\", \"required\", \"\", 3, \"input\"], [1, \"fas\", \"fa-lock\"], [\"type\", \"submit\", \"routerLink\", \"/accueil\"], [\"type\", \"submit\"]],\n  template: function PaymentComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-navbar\");\n      i0.ɵɵelementStart(1, \"div\", 0)(2, \"form\", 1);\n      i0.ɵɵlistener(\"submit\", function PaymentComponent_Template_form_submit_2_listener() {\n        return ctx.submitPayment();\n      });\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"label\", 3);\n      i0.ɵɵtext(5, \"Nom complet\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 4)(7, \"input\", 5);\n      i0.ɵɵlistener(\"input\", function PaymentComponent_Template_input_input_7_listener($event) {\n        return ctx.restrictToAlphabets($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"i\", 6);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"div\", 2)(10, \"label\", 7);\n      i0.ɵɵtext(11, \"Num\\u00E9ro de carte\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"div\", 4)(13, \"input\", 8);\n      i0.ɵɵlistener(\"input\", function PaymentComponent_Template_input_input_13_listener($event) {\n        return ctx.restrictToNumbers($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(14, \"i\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"div\", 2)(16, \"label\", 10);\n      i0.ɵɵtext(17, \"Date d'expiration\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\", 4)(19, \"input\", 11);\n      i0.ɵɵlistener(\"input\", function PaymentComponent_Template_input_input_19_listener($event) {\n        return ctx.restrictToNumbers($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(20, \"span\");\n      i0.ɵɵelementStart(21, \"input\", 12);\n      i0.ɵɵlistener(\"input\", function PaymentComponent_Template_input_input_21_listener($event) {\n        return ctx.restrictToNumbers($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(22, \"i\", 13);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(23, \"div\", 2)(24, \"label\", 14);\n      i0.ɵɵtext(25, \"CVV\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"div\", 4)(27, \"input\", 15);\n      i0.ɵɵlistener(\"input\", function PaymentComponent_Template_input_input_27_listener($event) {\n        return ctx.restrictToNumbers($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(28, \"i\", 16);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(29, \"button\", 17);\n      i0.ɵɵtext(30, \"Annuler\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"button\", 18);\n      i0.ɵɵtext(32, \"Soumettre le paiement\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.paymentForm);\n    }\n  },\n  dependencies: [i1.RouterLink, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.MaxLengthValidator, i5.FormGroupDirective, i5.FormControlName, i6.NavbarComponent],\n  styles: [\".payment-container[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  height: 100vh;\\r\\n}\\r\\n\\r\\n.title[_ngcontent-%COMP%] {\\r\\n  color: #ffffff;\\r\\n  font-size: 28px;\\r\\n  margin-bottom: 30px;\\r\\n}\\r\\n\\r\\n.payment-form[_ngcontent-%COMP%] {\\r\\n  width: 400px;\\r\\n  padding: 20px;\\r\\n  border-radius: 10px;\\r\\n  background-color: #ffffff;\\r\\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.form-group[_ngcontent-%COMP%] {\\r\\n  margin-bottom: 20px;\\r\\n}\\r\\n\\r\\nlabel[_ngcontent-%COMP%] {\\r\\n  display: block;\\r\\n  color: #555555;\\r\\n  font-size: 16px;\\r\\n  margin-bottom: 5px;\\r\\n}\\r\\n\\r\\n.input-container[_ngcontent-%COMP%] {\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\ninput[type=\\\"text\\\"][_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  padding: 10px;\\r\\n  border-radius: 5px;\\r\\n  border: 1px solid #cccccc;\\r\\n}\\r\\n\\r\\ninput[type=\\\"text\\\"][_ngcontent-%COMP%]:focus {\\r\\n  border-color: #00cccc;\\r\\n}\\r\\n\\r\\ni[_ngcontent-%COMP%] {\\r\\n  position: absolute;\\r\\n  top: 50%;\\r\\n  right: 10px;\\r\\n  transform: translateY(-50%);\\r\\n  color: #cccccc;\\r\\n}\\r\\n\\r\\nbutton[type=\\\"submit\\\"][_ngcontent-%COMP%] {\\r\\n  display: block;\\r\\n  width: 100%;\\r\\n  margin-top: 20px;\\r\\n  padding: 10px;\\r\\n  background-color: #00cccc;\\r\\n  color: #ffffff;\\r\\n  font-size: 16px;\\r\\n  border: none;\\r\\n  border-radius: 5px;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\nbutton[type=\\\"submit\\\"][_ngcontent-%COMP%]:hover {\\r\\n  opacity: 0.8;\\r\\n}\\r\\n\\r\\n.input-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\r\\n  margin: 0 5px;\\r\\n}\\r\\n\\r\\n.input-container[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\ninput[type=\\\"text\\\"][_ngcontent-%COMP%] {\\r\\n  flex: 1;\\r\\n}\\r\\n\\r\\ninput[type=\\\"text\\\"][_ngcontent-%COMP%]    + span[_ngcontent-%COMP%] {\\r\\n  margin: 0 5px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9wYXltZW50L3BheW1lbnQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSwwQkFBMEI7QUFDMUI7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLHVCQUF1QjtFQUN2QixtQkFBbUI7RUFDbkIsYUFBYTtBQUNmOztBQUVBO0VBQ0UsY0FBYztFQUNkLGVBQWU7RUFDZixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osYUFBYTtFQUNiLG1CQUFtQjtFQUNuQix5QkFBeUI7RUFDekIsdUNBQXVDO0FBQ3pDOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsY0FBYztFQUNkLGNBQWM7RUFDZCxlQUFlO0VBQ2Ysa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsV0FBVztFQUNYLGFBQWE7RUFDYixrQkFBa0I7RUFDbEIseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UscUJBQXFCO0FBQ3ZCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFFBQVE7RUFDUixXQUFXO0VBQ1gsMkJBQTJCO0VBQzNCLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsV0FBVztFQUNYLGdCQUFnQjtFQUNoQixhQUFhO0VBQ2IseUJBQXlCO0VBQ3pCLGNBQWM7RUFDZCxlQUFlO0VBQ2YsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsYUFBYTtFQUNiLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLE9BQU87QUFDVDs7QUFFQTtFQUNFLGFBQWE7QUFDZiIsInNvdXJjZXNDb250ZW50IjpbIi8qIHBheW1lbnQuY29tcG9uZW50LmNzcyAqL1xyXG4ucGF5bWVudC1jb250YWluZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGhlaWdodDogMTAwdmg7XHJcbn1cclxuXHJcbi50aXRsZSB7XHJcbiAgY29sb3I6ICNmZmZmZmY7XHJcbiAgZm9udC1zaXplOiAyOHB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDMwcHg7XHJcbn1cclxuXHJcbi5wYXltZW50LWZvcm0ge1xyXG4gIHdpZHRoOiA0MDBweDtcclxuICBwYWRkaW5nOiAyMHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcclxuICBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDAsIDAsIDAsIDAuMik7XHJcbn1cclxuXHJcbi5mb3JtLWdyb3VwIHtcclxuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG59XHJcblxyXG5sYWJlbCB7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbiAgY29sb3I6ICM1NTU1NTU7XHJcbiAgZm9udC1zaXplOiAxNnB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDVweDtcclxufVxyXG5cclxuLmlucHV0LWNvbnRhaW5lciB7XHJcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPVwidGV4dFwiXSB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgcGFkZGluZzogMTBweDtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2NjY2NjYztcclxufVxyXG5cclxuaW5wdXRbdHlwZT1cInRleHRcIl06Zm9jdXMge1xyXG4gIGJvcmRlci1jb2xvcjogIzAwY2NjYztcclxufVxyXG5cclxuaSB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogNTAlO1xyXG4gIHJpZ2h0OiAxMHB4O1xyXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcclxuICBjb2xvcjogI2NjY2NjYztcclxufVxyXG5cclxuYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0ge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgcGFkZGluZzogMTBweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDBjY2NjO1xyXG4gIGNvbG9yOiAjZmZmZmZmO1xyXG4gIGZvbnQtc2l6ZTogMTZweDtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl06aG92ZXIge1xyXG4gIG9wYWNpdHk6IDAuODtcclxufVxyXG5cclxuLmlucHV0LWNvbnRhaW5lciBzcGFuIHtcclxuICBtYXJnaW46IDAgNXB4O1xyXG59XHJcblxyXG4uaW5wdXQtY29udGFpbmVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuXHJcbmlucHV0W3R5cGU9XCJ0ZXh0XCJdIHtcclxuICBmbGV4OiAxO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPVwidGV4dFwiXSArIHNwYW4ge1xyXG4gIG1hcmdpbjogMCA1cHg7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["FormControl","FormGroup","Validators","PaymentComponent","constructor","route","paymentService","router","connectionService","toastr","cardNumberValidator","control","value","length","lengthError","ngOnInit","isUserLoggedIn$","subscribe","loggedIn","isLoggedIn","navigate","params","idTerrain","Number","dateReservation","startTime","endTime","paymentForm","holderName","required","cardNumber","expMonth","min","max","expYear","cvv","pattern","submitPayment","invalid","controls","error","errors","confirmPayment","res","success","redirectUrl","restrictToNumbers","event","input","target","replace","restrictToAlphabets","sanitizedValue","i0","ɵɵdirectiveInject","i1","ActivatedRoute","i2","PaymentService","Router","i3","ConnectionService","i4","ToastrService","selectors","decls","vars","consts","template","PaymentComponent_Template","rf","ctx","ɵɵelement","ɵɵelementStart","ɵɵlistener","PaymentComponent_Template_form_submit_2_listener","ɵɵtext","ɵɵelementEnd","PaymentComponent_Template_input_input_7_listener","$event","PaymentComponent_Template_input_input_13_listener","PaymentComponent_Template_input_input_19_listener","PaymentComponent_Template_input_input_21_listener","PaymentComponent_Template_input_input_27_listener","ɵɵadvance","ɵɵproperty"],"sources":["C:\\Users\\Youssef EL-HAMRANI\\Desktop\\Node js\\NEW PFE\\project_pfe-frontend\\frontend\\src\\app\\components\\payment\\payment.component.ts","C:\\Users\\Youssef EL-HAMRANI\\Desktop\\Node js\\NEW PFE\\project_pfe-frontend\\frontend\\src\\app\\components\\payment\\payment.component.html"],"sourcesContent":["import { Component, OnInit } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { PaymentService } from \"src/app/services/payment.service\";\nimport { Router } from \"@angular/router\";\nimport { ConnectionService } from \"src/app/services/connection.service\";\nimport { ToastrService } from \"ngx-toastr\";\nimport { AbstractControl, ValidationErrors } from \"@angular/forms\";\n\n@Component({\n  selector: \"app-payment\",\n  templateUrl: \"./payment.component.html\",\n  styleUrls: [\"./payment.component.css\"],\n})\nexport class PaymentComponent {\n  isLoggedIn!: boolean;\n  idTerrain!: number;\n  dateReservation!: number;\n  startTime!: number;\n  endTime!: number;\n  paymentForm!: FormGroup;\n\n  constructor(\n    private route: ActivatedRoute,\n    private paymentService: PaymentService,\n    private router: Router,\n    private connectionService: ConnectionService,\n    private toastr: ToastrService\n  ) {}\n\n  cardNumberValidator = (control: AbstractControl): ValidationErrors | null => {\n    const value = control.value as string;\n    if (value && value.length !== 16) {\n      return { lengthError: true };\n    }\n    return null;\n  };\n\n  ngOnInit() {\n    this.connectionService.isUserLoggedIn$.subscribe(\n      (loggedIn) => (this.isLoggedIn = loggedIn)\n    );\n\n    if (this.isLoggedIn == false) {\n      this.router.navigate([\"/accueil\"]);\n    }\n\n    this.route.params.subscribe((params) => {\n      this.idTerrain = Number(params[\"idTerrain\"]);\n      this.dateReservation = params[\"dateReservation\"];\n      this.startTime = params[\"startTime\"];\n      this.endTime = params[\"endTime\"];\n\n      this.paymentForm = new FormGroup({\n        idTerrain: new FormControl(this.idTerrain),\n        dateReservation: new FormControl(this.dateReservation),\n        startTime: new FormControl(this.startTime),\n        endTime: new FormControl(this.endTime),\n        holderName: new FormControl(\"\", [Validators.required]),\n        cardNumber: new FormControl(\"\", [\n          Validators.required,\n          this.cardNumberValidator,\n        ]),\n        expMonth: new FormControl(\"\", [\n          Validators.required,\n          Validators.min(1),\n          Validators.max(12),\n        ]),\n        expYear: new FormControl(\"\", [\n          Validators.required,\n          Validators.min(2023),\n          Validators.max(2050),\n        ]),\n        cvv: new FormControl(\"\", [\n          Validators.required,\n          Validators.pattern(/^\\d{3,4}$/),\n        ]),\n      });\n    });\n  }\n\n  submitPayment() {\n    if (this.paymentForm.invalid) {\n      if (\n        !this.paymentForm.controls[\"holderName\"].value ||\n        !this.paymentForm.controls[\"cardNumber\"].value ||\n        !this.paymentForm.controls[\"expMonth\"].value ||\n        !this.paymentForm.controls[\"expYear\"].value ||\n        !this.paymentForm.controls[\"cvv\"].value\n      ) {\n        this.toastr.error(\"Veuillez remplir toutes les entrées\", \"\");\n      } else if (this.paymentForm.controls[\"cardNumber\"].errors) {\n        this.toastr.error(\"Le numéro de carte doit contenir 16 chiffres\", \"\");\n      } else if (this.paymentForm.controls[\"expMonth\"].errors) {\n        this.toastr.error(\"Le mois doit être compris entre 1 et 12\", \"\");\n      } else if (this.paymentForm.controls[\"expYear\"].errors) {\n        this.toastr.error(\"L'année doit être comprise entre 2023 et 2050\", \"\");\n      } else if (this.paymentForm.controls[\"cvv\"].errors) {\n        this.toastr.error(\"CVV doit contenir 3 ou 4 chiffres\", \"\");\n      }\n      return;\n    }\n\n    const value = this.paymentForm.value;\n    this.paymentService.confirmPayment(value).subscribe((res) => {\n      if (res.success) {\n        this.router.navigate([res.redirectUrl]);\n        this.toastr.success(\"Paiement validé!\", \"Succès\");\n      }\n    });\n  }\n\n  restrictToNumbers(event: Event): void {\n    const input = event.target as HTMLInputElement;\n    input.value = input.value.replace(/[^0-9]/g, \"\");\n  }\n\n  restrictToAlphabets(event: Event): void {\n    const input = event.target as HTMLInputElement;\n    const sanitizedValue = input.value.replace(/[^a-zA-Z\\s]/g, \"\");\n    input.value = sanitizedValue;\n  }\n}\n","<app-navbar></app-navbar>\n<div class=\"payment-container\">\n  <form\n    action=\"/payment/:idReservation\"\n    method=\"post\"\n    [formGroup]=\"paymentForm\"\n    (submit)=\"submitPayment()\"\n    class=\"payment-form\"\n  >\n    <div class=\"form-group\">\n      <label for=\"card-holder\">Nom complet</label>\n      <div class=\"input-container\">\n        <input\n          type=\"text\"\n          id=\"card-holder\"\n          (input)=\"restrictToAlphabets($event)\"\n          name=\"cardHolder\"\n          formControlName=\"holderName\"\n          required\n        />\n        <i class=\"fas fa-user\"></i>\n      </div>\n    </div>\n    <div class=\"form-group\">\n      <label for=\"card-number\">Numéro de carte</label>\n      <div class=\"input-container\">\n        <input\n          type=\"text\"\n          id=\"card-number\"\n          name=\"cardNumber\"\n          (input)=\"restrictToNumbers($event)\"\n          maxlength=\"16\"\n          formControlName=\"cardNumber\"\n          required\n        />\n        <i class=\"fas fa-credit-card\"></i>\n      </div>\n    </div>\n    <div class=\"form-group\">\n      <label for=\"exp-date\">Date d'expiration</label>\n      <div class=\"input-container\">\n        <input\n          type=\"text\"\n          id=\"exp-month\"\n          name=\"expMonth\"\n          placeholder=\"MM\"\n          (input)=\"restrictToNumbers($event)\"\n          maxlength=\"2\"\n          formControlName=\"expMonth\"\n          required\n        />\n        <span> </span>\n        <input\n          type=\"text\"\n          id=\"exp-year\"\n          name=\"expYear\"\n          placeholder=\"YYYY\"\n          (input)=\"restrictToNumbers($event)\"\n          maxlength=\"4\"\n          formControlName=\"expYear\"\n          required\n        />\n        <i class=\"fas fa-calendar-alt\"></i>\n      </div>\n    </div>\n    <div class=\"form-group\">\n      <label for=\"cvv\">CVV</label>\n      <div class=\"input-container\">\n        <input\n          type=\"text\"\n          id=\"cvv\"\n          name=\"cvv\"\n          (input)=\"restrictToNumbers($event)\"\n          formControlName=\"cvv\"\n          maxlength=\"4\"\n          required\n        />\n        <i class=\"fas fa-lock\"></i>\n      </div>\n    </div>\n    <button type=\"submit\" routerLink=\"/accueil\">Annuler</button>\n    <button type=\"submit\">Soumettre le paiement</button>\n  </form>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}