{"ast":null,"code":"import { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { environment } from \"src/environment/environment\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/reservation.service\";\nimport * as i3 from \"src/app/services/connection.service\";\nimport * as i4 from \"ngx-toastr\";\nimport * as i5 from \"@angular/common/http\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"../navbar/navbar.component\";\nexport class ReservationComponent {\n  constructor(route, reservationService, router, connectionService, toastr, http) {\n    this.route = route;\n    this.reservationService = reservationService;\n    this.router = router;\n    this.connectionService = connectionService;\n    this.toastr = toastr;\n    this.http = http;\n    this.terrainName = [];\n    this.url = environment.api_url + \"/terrain\";\n  }\n  ngOnInit() {\n    this.connectionService.isUserLoggedIn$.subscribe(loggedIn => this.isLoggedIn = loggedIn);\n    if (this.isLoggedIn == false) {\n      this.router.navigate([\"/log\"]);\n    }\n    this.route.params.subscribe(params => {\n      this.idTerrain = Number(params[\"id\"]);\n      this.reservationForm = new FormGroup({\n        idTerrain: new FormControl(this.idTerrain),\n        date: new FormControl(\"\", [Validators.required]),\n        startTime: new FormControl(\"\", [Validators.required]),\n        endTime: new FormControl(\"\", [Validators.required])\n      });\n      this.getTerrain();\n    });\n  }\n  getTerrain() {\n    const options = {\n      params: {\n        idTerrain: this.idTerrain\n      }\n    };\n    this.http.get(this.url, options).subscribe(terrainName => {\n      this.terrainName = terrainName;\n    }, error => {\n      console.error(error);\n    });\n  }\n  convertToMinutes(time) {\n    const [hours, minutes] = time.split(\":\").map(Number);\n    return hours * 60 + minutes;\n  }\n  submitReservation() {\n    const selectedDate = this.reservationForm.get(\"date\")?.value;\n    const startTime = this.reservationForm.get(\"startTime\")?.value;\n    const currentDate = new Date();\n    const selectedDateTime = new Date(selectedDate);\n    const [hours, minutes] = startTime.split(\":\").map(Number);\n    selectedDateTime.setHours(hours, minutes);\n    if (currentDate > selectedDateTime) {\n      this.toastr.warning(\"La date sélectionnée ne peut pas être dans le passé\", \"Erreur\");\n      return;\n    }\n    const timeDiff = selectedDateTime.getTime() - currentDate.getTime();\n    const daysDiff = timeDiff / (1000 * 60 * 60 * 24);\n    if (daysDiff > 60) {\n      this.toastr.warning(\"La date sélectionnée ne peut pas être à plus de 60 jours de la date d'aujourd'hui\", \"Erreur\");\n      return;\n    }\n    if (!this.reservationForm.controls[\"date\"].value || !this.reservationForm.controls[\"startTime\"].value || !this.reservationForm.controls[\"endTime\"].value) {\n      this.toastr.warning(\"Veuillez remplir toutes les entrées\", \"\");\n      return;\n    }\n    const start = this.convertToMinutes(this.reservationForm.controls[\"startTime\"].value);\n    const end = this.convertToMinutes(this.reservationForm.controls[\"endTime\"].value);\n    if (end <= start) {\n      this.toastr.warning(\"L'heure de début de la réservation doit venir avant l'heure de fin\", \"\");\n      return;\n    }\n    const difference = end - start;\n    if (difference < 30) {\n      this.toastr.warning(\"La durée de la réservation doit être de minimum 30 min\", \"\");\n      return;\n    } else if (difference > 120) {\n      this.toastr.warning(\"La durée de la réservation doit être au maximum de 2 heures\", \"\");\n      return;\n    }\n    if (start < 7 * 60 || start > 22 * 60 || end < 7 * 60 || end > 22 * 60) {\n      this.toastr.warning(\"La réservation doit être entre 7h et 22h\", \"\");\n      return;\n    }\n    const value = this.reservationForm.value;\n    console.log(value);\n    this.reservationService.reserve(value).subscribe(res => {\n      if (res.success) {\n        this.router.navigate([res.redirectUrl]);\n      } else if (!res.success) {\n        this.toastr.warning(res.message || \"\", \"Erreur\");\n      }\n    });\n  }\n}\nReservationComponent.ɵfac = function ReservationComponent_Factory(t) {\n  return new (t || ReservationComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ReservationService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i3.ConnectionService), i0.ɵɵdirectiveInject(i4.ToastrService), i0.ɵɵdirectiveInject(i5.HttpClient));\n};\nReservationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ReservationComponent,\n  selectors: [[\"app-reservation\"]],\n  decls: 46,\n  vars: 4,\n  consts: [[1, \"reservation-container\"], [1, \"reservation-card\"], [1, \"title\"], [1, \"terrain-info\"], [\"method\", \"POST\", 1, \"reservation-form\", 3, \"formGroup\", \"submit\"], [1, \"form-group\"], [\"for\", \"date\"], [\"type\", \"date\", \"id\", \"date\", \"name\", \"date\", \"formControlName\", \"date\", \"required\", \"\"], [\"for\", \"start-time\"], [\"type\", \"time\", \"id\", \"start-time\", \"name\", \"start\", \"formControlName\", \"startTime\", \"required\", \"\"], [\"for\", \"end-time\"], [\"type\", \"time\", \"id\", \"end-time\", \"name\", \"end\", \"formControlName\", \"endTime\", \"required\", \"\"], [\"type\", \"submit\", \"routerLink\", \"/accueil\"], [\"type\", \"submit\"]],\n  template: function ReservationComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-navbar\");\n      i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"h2\", 2);\n      i0.ɵɵtext(4, \"Nouvelle R\\u00E9servation\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(5, \"br\")(6, \"br\");\n      i0.ɵɵelementStart(7, \"div\", 3)(8, \"div\")(9, \"p\")(10, \"strong\");\n      i0.ɵɵtext(11, \"Nom de terrain :\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"p\")(13, \"strong\");\n      i0.ɵɵtext(14, \"Prix :\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"p\")(16, \"strong\");\n      i0.ɵɵtext(17, \"Commune :\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(18, \"div\")(19, \"p\");\n      i0.ɵɵtext(20);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"p\");\n      i0.ɵɵtext(22);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"p\");\n      i0.ɵɵtext(24);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(25, \"br\");\n      i0.ɵɵelementStart(26, \"form\", 4);\n      i0.ɵɵlistener(\"submit\", function ReservationComponent_Template_form_submit_26_listener() {\n        return ctx.submitReservation();\n      });\n      i0.ɵɵelementStart(27, \"div\", 5)(28, \"label\", 6);\n      i0.ɵɵtext(29, \"Date :\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(30, \"input\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(31, \"br\");\n      i0.ɵɵelementStart(32, \"div\", 5)(33, \"label\", 8);\n      i0.ɵɵtext(34, \"Heure de d\\u00E9but :\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(35, \"input\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(36, \"br\");\n      i0.ɵɵelementStart(37, \"div\", 5)(38, \"label\", 10);\n      i0.ɵɵtext(39, \"Heure de fin :\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(40, \"input\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(41, \"br\");\n      i0.ɵɵelementStart(42, \"button\", 12);\n      i0.ɵɵtext(43, \"BACK\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(44, \"button\", 13);\n      i0.ɵɵtext(45, \"R\\u00C9SERVER\");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(20);\n      i0.ɵɵtextInterpolate(ctx.terrainName[0].nameTerrain);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"\", ctx.terrainName[0].price, \" euro\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.terrainName[0].location);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.reservationForm);\n    }\n  },\n  dependencies: [i1.RouterLink, i6.ɵNgNoValidate, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.RequiredValidator, i6.FormGroupDirective, i6.FormControlName, i7.NavbarComponent],\n  styles: [\".reservation-container[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  min-height: calc(100vh - 80px);\\r\\n  margin-top: 80px;\\r\\n  box-sizing: border-box;\\r\\n}\\r\\n\\r\\n.reservation-card[_ngcontent-%COMP%] {\\r\\n  background: #00cccc;\\r\\n  background: linear-gradient(to right, #97eaea, #d5f6f6);\\r\\n  background-repeat: no-repeat;\\r\\n  background-size: cover;\\r\\n  background-position: 0 0;\\r\\n  width: 400px;\\r\\n  padding: 20px;\\r\\n  border-radius: 10px;\\r\\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.title[_ngcontent-%COMP%] {\\r\\n  text-align: center;\\r\\n  color: #19a7a7;\\r\\n}\\r\\n\\r\\n.terrain-info[_ngcontent-%COMP%] {\\r\\n  display: grid;\\r\\n  grid-template-columns: 0.4fr 0.4fr;\\r\\n  color: #00cccc;\\r\\n}\\r\\n.terrain-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\r\\n  margin: 1;\\r\\n}\\r\\nstrong[_ngcontent-%COMP%] {\\r\\n  color: #19a7a7;\\r\\n}\\r\\nlabel[_ngcontent-%COMP%] {\\r\\n  color: #19a7a7;\\r\\n}\\r\\n\\r\\n.form-group[_ngcontent-%COMP%] {\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\n\\r\\nlabel[_ngcontent-%COMP%] {\\r\\n  display: block;\\r\\n  font-weight: bold;\\r\\n}\\r\\n\\r\\ninput[type=\\\"date\\\"][_ngcontent-%COMP%], input[type=\\\"time\\\"][_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  padding: 5px;\\r\\n  border-radius: 5px;\\r\\n  border: 1px solid lightgray;\\r\\n}\\r\\n\\r\\nbutton[type=\\\"submit\\\"][_ngcontent-%COMP%] {\\r\\n  display: block;\\r\\n  margin: 20px auto;\\r\\n  padding: 10px 20px;\\r\\n  background-color: #00cccc;\\r\\n  color: white;\\r\\n  border: none;\\r\\n  border-radius: 5px;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\nbutton[type=\\\"submit\\\"][_ngcontent-%COMP%]:hover {\\r\\n  background-color: #45a049;\\r\\n}\\r\\n\\r\\n.line[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\\r\\n  margin-right: 5px;\\r\\n  white-space: pre;\\r\\n}\\r\\n\\r\\n.reservation-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\r\\n  display: inline-block;\\r\\n  margin-right: 10px;\\r\\n}\\r\\n\\r\\n.button-container[_ngcontent-%COMP%] {\\r\\n  text-align: center;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9yZXNlcnZhdGlvbi9yZXNlcnZhdGlvbi5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBYTtFQUNiLHVCQUF1QjtFQUN2QixtQkFBbUI7RUFDbkIsOEJBQThCO0VBQzlCLGdCQUFnQjtFQUNoQixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxtQkFBbUI7RUFFbkIsdURBQXVEO0VBQ3ZELDRCQUE0QjtFQUM1QixzQkFBc0I7RUFDdEIsd0JBQXdCO0VBQ3hCLFlBQVk7RUFDWixhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLHVDQUF1QztBQUN6Qzs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLGtDQUFrQztFQUNsQyxjQUFjO0FBQ2hCO0FBQ0E7RUFDRSxTQUFTO0FBQ1g7QUFDQTtFQUNFLGNBQWM7QUFDaEI7QUFDQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsaUJBQWlCO0FBQ25COztBQUVBOztFQUVFLFdBQVc7RUFDWCxZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLDJCQUEyQjtBQUM3Qjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLHlCQUF5QjtFQUN6QixZQUFZO0VBQ1osWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxrQkFBa0I7QUFDcEIiLCJzb3VyY2VzQ29udGVudCI6WyIucmVzZXJ2YXRpb24tY29udGFpbmVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgbWluLWhlaWdodDogY2FsYygxMDB2aCAtIDgwcHgpO1xyXG4gIG1hcmdpbi10b3A6IDgwcHg7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxufVxyXG5cclxuLnJlc2VydmF0aW9uLWNhcmQge1xyXG4gIGJhY2tncm91bmQ6ICMwMGNjY2M7XHJcbiAgYmFja2dyb3VuZDogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICM5N2VhZWEsICNkNWY2ZjYpO1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzk3ZWFlYSwgI2Q1ZjZmNik7XHJcbiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcclxuICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xyXG4gIGJhY2tncm91bmQtcG9zaXRpb246IDAgMDtcclxuICB3aWR0aDogNDAwcHg7XHJcbiAgcGFkZGluZzogMjBweDtcclxuICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4yKTtcclxufVxyXG5cclxuLnRpdGxlIHtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgY29sb3I6ICMxOWE3YTc7XHJcbn1cclxuXHJcbi50ZXJyYWluLWluZm8ge1xyXG4gIGRpc3BsYXk6IGdyaWQ7XHJcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAwLjRmciAwLjRmcjtcclxuICBjb2xvcjogIzAwY2NjYztcclxufVxyXG4udGVycmFpbi1pbmZvIHAge1xyXG4gIG1hcmdpbjogMTtcclxufVxyXG5zdHJvbmcge1xyXG4gIGNvbG9yOiAjMTlhN2E3O1xyXG59XHJcbmxhYmVsIHtcclxuICBjb2xvcjogIzE5YTdhNztcclxufVxyXG5cclxuLmZvcm0tZ3JvdXAge1xyXG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbn1cclxuXHJcbmxhYmVsIHtcclxuICBkaXNwbGF5OiBibG9jaztcclxuICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG5cclxuaW5wdXRbdHlwZT1cImRhdGVcIl0sXHJcbmlucHV0W3R5cGU9XCJ0aW1lXCJdIHtcclxuICB3aWR0aDogMTAwJTtcclxuICBwYWRkaW5nOiA1cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkIGxpZ2h0Z3JheTtcclxufVxyXG5cclxuYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0ge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIG1hcmdpbjogMjBweCBhdXRvO1xyXG4gIHBhZGRpbmc6IDEwcHggMjBweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDBjY2NjO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl06aG92ZXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM0NWEwNDk7XHJcbn1cclxuXHJcbi5saW5lIHN0cm9uZyB7XHJcbiAgbWFyZ2luLXJpZ2h0OiA1cHg7XHJcbiAgd2hpdGUtc3BhY2U6IHByZTtcclxufVxyXG5cclxuLnJlc2VydmF0aW9uLWZvcm0gYnV0dG9uIHtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xyXG59XHJcblxyXG4uYnV0dG9uLWNvbnRhaW5lciB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"names":["FormControl","FormGroup","Validators","environment","ReservationComponent","constructor","route","reservationService","router","connectionService","toastr","http","terrainName","url","api_url","ngOnInit","isUserLoggedIn$","subscribe","loggedIn","isLoggedIn","navigate","params","idTerrain","Number","reservationForm","date","required","startTime","endTime","getTerrain","options","get","error","console","convertToMinutes","time","hours","minutes","split","map","submitReservation","selectedDate","value","currentDate","Date","selectedDateTime","setHours","warning","timeDiff","getTime","daysDiff","controls","start","end","difference","log","reserve","res","success","redirectUrl","message","i0","ɵɵdirectiveInject","i1","ActivatedRoute","i2","ReservationService","Router","i3","ConnectionService","i4","ToastrService","i5","HttpClient","selectors","decls","vars","consts","template","ReservationComponent_Template","rf","ctx","ɵɵelement","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","ReservationComponent_Template_form_submit_26_listener","ɵɵadvance","ɵɵtextInterpolate","nameTerrain","ɵɵtextInterpolate1","price","location","ɵɵproperty"],"sources":["C:\\Users\\Youssef EL-HAMRANI\\Desktop\\Node js\\NEW PFE\\project_pfe-frontend\\frontend\\src\\app\\components\\reservation\\reservation.component.ts","C:\\Users\\Youssef EL-HAMRANI\\Desktop\\Node js\\NEW PFE\\project_pfe-frontend\\frontend\\src\\app\\components\\reservation\\reservation.component.html"],"sourcesContent":["import { Component, OnInit } from \"@angular/core\";\nimport { TerrainModel } from \"../../models/terrain.model\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { ReservationService } from \"src/app/services/reservation.service\";\nimport { Router } from \"@angular/router\";\nimport { ConnectionService } from \"src/app/services/connection.service\";\nimport { ToastrService } from \"ngx-toastr\";\nimport { environment } from \"src/environment/environment\";\nimport { HttpClient } from \"@angular/common/http\";\n\n@Component({\n  selector: \"app-reservation\",\n  templateUrl: \"./reservation.component.html\",\n  styleUrls: [\"./reservation.component.css\"],\n})\nexport class ReservationComponent implements OnInit {\n  isLoggedIn!: boolean;\n  terrainName: any[] = [];\n\n  idTerrain!: number;\n  reservationForm!: FormGroup;\n\n  url = environment.api_url + \"/terrain\";\n\n  constructor(\n    private route: ActivatedRoute,\n    private reservationService: ReservationService,\n    private router: Router,\n    private connectionService: ConnectionService,\n    private toastr: ToastrService,\n    private http: HttpClient\n  ) {}\n\n  ngOnInit() {\n    this.connectionService.isUserLoggedIn$.subscribe(\n      (loggedIn) => (this.isLoggedIn = loggedIn)\n    );\n\n    if (this.isLoggedIn == false) {\n      this.router.navigate([\"/log\"]);\n    }\n\n    this.route.params.subscribe((params) => {\n      this.idTerrain = Number(params[\"id\"]);\n\n      this.reservationForm = new FormGroup({\n        idTerrain: new FormControl(this.idTerrain),\n        date: new FormControl(\"\", [Validators.required]),\n        startTime: new FormControl(\"\", [Validators.required]),\n        endTime: new FormControl(\"\", [Validators.required]),\n      });\n\n      this.getTerrain();\n    });\n  }\n\n  getTerrain(): void {\n    const options = { params: { idTerrain: this.idTerrain } };\n    this.http.get<any[]>(this.url, options).subscribe(\n      (terrainName) => {\n        this.terrainName = terrainName;\n      },\n      (error) => {\n        console.error(error);\n      }\n    );\n  }\n\n  convertToMinutes(time: string): number {\n    const [hours, minutes] = time.split(\":\").map(Number);\n    return hours * 60 + minutes;\n  }\n\n  submitReservation() {\n    const selectedDate = this.reservationForm.get(\"date\")?.value;\n    const startTime = this.reservationForm.get(\"startTime\")?.value;\n    const currentDate = new Date();\n\n    const selectedDateTime = new Date(selectedDate);\n    const [hours, minutes] = startTime.split(\":\").map(Number);\n    selectedDateTime.setHours(hours, minutes);\n\n    if (currentDate > selectedDateTime) {\n      this.toastr.warning(\n        \"La date sélectionnée ne peut pas être dans le passé\",\n        \"Erreur\"\n      );\n      return;\n    }\n\n    const timeDiff = selectedDateTime.getTime() - currentDate.getTime();\n    const daysDiff = timeDiff / (1000 * 60 * 60 * 24);\n\n    if (daysDiff > 60) {\n      this.toastr.warning(\n        \"La date sélectionnée ne peut pas être à plus de 60 jours de la date d'aujourd'hui\",\n        \"Erreur\"\n      );\n      return;\n    }\n\n    if (\n      !this.reservationForm.controls[\"date\"].value ||\n      !this.reservationForm.controls[\"startTime\"].value ||\n      !this.reservationForm.controls[\"endTime\"].value\n    ) {\n      this.toastr.warning(\"Veuillez remplir toutes les entrées\", \"\");\n      return;\n    }\n\n    const start = this.convertToMinutes(\n      this.reservationForm.controls[\"startTime\"].value\n    );\n    const end = this.convertToMinutes(\n      this.reservationForm.controls[\"endTime\"].value\n    );\n\n    if (end <= start) {\n      this.toastr.warning(\n        \"L'heure de début de la réservation doit venir avant l'heure de fin\",\n        \"\"\n      );\n      return;\n    }\n\n    const difference = end - start;\n\n    if (difference < 30) {\n      this.toastr.warning(\n        \"La durée de la réservation doit être de minimum 30 min\",\n        \"\"\n      );\n      return;\n    } else if (difference > 120) {\n      this.toastr.warning(\n        \"La durée de la réservation doit être au maximum de 2 heures\",\n        \"\"\n      );\n      return;\n    }\n\n    if (start < 7 * 60 || start > 22 * 60 || end < 7 * 60 || end > 22 * 60) {\n      this.toastr.warning(\"La réservation doit être entre 7h et 22h\", \"\");\n      return;\n    }\n\n    const value = this.reservationForm.value;\n    console.log(value);\n    this.reservationService.reserve(value).subscribe((res) => {\n      if (res.success) {\n        this.router.navigate([res.redirectUrl]);\n      } else if (!res.success) {\n        this.toastr.warning(res.message || \"\", \"Erreur\");\n      }\n    });\n  }\n}\n","<app-navbar></app-navbar>\n\n<div class=\"reservation-container\">\n  <div class=\"reservation-card\">\n    <h2 class=\"title\">Nouvelle Réservation</h2>\n    <br />\n    <br />\n    <div class=\"terrain-info\">\n      <div>\n        <p><strong>Nom de terrain :</strong></p>\n        <p><strong>Prix :</strong></p>\n        <p><strong>Commune :</strong></p>\n      </div>\n      <div>\n        <p>{{ terrainName[0].nameTerrain }}</p>\n        <p>{{ terrainName[0].price }} euro</p>\n        <p>{{ terrainName[0].location }}</p>\n      </div>\n    </div>\n    <br />\n    <form\n      class=\"reservation-form\"\n      method=\"POST\"\n      [formGroup]=\"reservationForm\"\n      (submit)=\"submitReservation()\"\n    >\n      <div class=\"form-group\">\n        <label for=\"date\">Date :</label>\n        <input\n          type=\"date\"\n          id=\"date\"\n          name=\"date\"\n          formControlName=\"date\"\n          required\n        />\n      </div>\n      <br />\n      <div class=\"form-group\">\n        <label for=\"start-time\">Heure de début :</label>\n        <input\n          type=\"time\"\n          id=\"start-time\"\n          name=\"start\"\n          formControlName=\"startTime\"\n          required\n        />\n      </div>\n      <br />\n      <div class=\"form-group\">\n        <label for=\"end-time\">Heure de fin :</label>\n        <input\n          type=\"time\"\n          id=\"end-time\"\n          name=\"end\"\n          formControlName=\"endTime\"\n          required\n        />\n      </div>\n      <br />\n      <button type=\"submit\" routerLink=\"/accueil\">BACK</button>\n      <button type=\"submit\">RÉSERVER</button>\n    </form>\n  </div>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}