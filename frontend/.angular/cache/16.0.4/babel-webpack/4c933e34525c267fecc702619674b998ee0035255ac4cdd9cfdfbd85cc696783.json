{"ast":null,"code":"import { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/signup.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"src/app/services/connection.service\";\nimport * as i5 from \"@angular/forms\";\nexport class SignupComponent {\n  constructor(signupservice, router, toastr, connectionService) {\n    this.signupservice = signupservice;\n    this.router = router;\n    this.toastr = toastr;\n    this.connectionService = connectionService;\n    this.signupForm = new FormGroup({\n      firstName: new FormControl(\"\", [Validators.required, Validators.minLength(2), Validators.pattern(/^[a-zA-Z\\s]*$/)]),\n      lastName: new FormControl(\"\", [Validators.required, Validators.minLength(2), Validators.pattern(/^[a-zA-Z\\s-]*$/)]),\n      email: new FormControl(\"\", [Validators.required, Validators.email]),\n      password: new FormControl(\"\", [Validators.required, this.passwordValidator.bind(this)]),\n      passwordConfirm: new FormControl(\"\", [Validators.required, this.matchPasswordValidator.bind(this)]),\n      terms: new FormControl(false, Validators.requiredTrue)\n    });\n  }\n  ngOnInit() {\n    this.connectionService.isUserLoggedIn$.subscribe(loggedIn => this.isLoggedIn = loggedIn);\n    if (this.isLoggedIn == true) {\n      this.router.navigate([\"/accueil\"]);\n    }\n  }\n  submit() {\n    if (this.signupForm.invalid) {\n      if (this.signupForm.controls[\"firstName\"].errors) {\n        this.toastr.error(\"Prénom invalide\", \"Erreur\");\n        return;\n      }\n      if (this.signupForm.controls[\"lastName\"].errors) {\n        this.toastr.error(\"Nom de famille invalide\", \"Erreur\");\n        return;\n      }\n      if (this.signupForm.controls[\"email\"].errors) {\n        this.toastr.error(\"Adresse e-mail invalide\", \"Erreur\");\n        return;\n      }\n      if (this.signupForm.controls[\"password\"].errors) {\n        this.toastr.error(\"Le mot de passe doit répondre aux exigences suivantes :<br>\" + \"1 - Au moins 10 caractères<br>\" + \"2 - Au moins 1 lettre majuscule<br>\" + \"3 - Au moins 1 lettre minuscule<br>\" + \"4 - Au moins 1 caractère spécial<br>\" + \"5 - Au moins 1 chiffre\", \"Password Error\", {\n          enableHtml: true\n        });\n        return;\n      }\n      if (this.signupForm.controls[\"passwordConfirm\"].errors) {\n        this.toastr.error(\"Les mots de passe ne correspondent pas\", \"Erreur\");\n        return;\n      }\n      if (this.signupForm.controls[\"terms\"].value !== true) {\n        this.toastr.error(\"Veuillez accepter les termes et conditions\", \"Erreur\");\n        return;\n      }\n    }\n    const value = this.signupForm.value;\n    this.signupservice.signup(value).subscribe(res => {\n      if (res.success) {\n        this.router.navigate([res.redirectUrl]);\n        this.toastr.success(\"Vérifiez votre courriel! <br>\" + \"Un lien pour confirmer votre compte vous a été envoyé<br>\", \"\", {\n          enableHtml: true\n        });\n      } else if (!res.success) {\n        this.toastr.error(\"L'adresse e-mail existe déjà!\", \"\");\n      }\n    });\n  }\n  passwordValidator(control) {\n    const password = control.value;\n    const passwordRegex = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=-_*]).{10,}$/;\n    if (!passwordRegex.test(password)) {\n      return {\n        passwordInvalid: true\n      };\n    }\n    return null;\n  }\n  matchPasswordValidator(control) {\n    const password = control.root.get(\"password\");\n    const confirmPassword = control.value;\n    if (password && confirmPassword !== password.value) {\n      return {\n        passwordMismatch: true\n      };\n    }\n    return null;\n  }\n}\nSignupComponent.ɵfac = function SignupComponent_Factory(t) {\n  return new (t || SignupComponent)(i0.ɵɵdirectiveInject(i1.SignupService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ToastrService), i0.ɵɵdirectiveInject(i4.ConnectionService));\n};\nSignupComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SignupComponent,\n  selectors: [[\"app-signup\"]],\n  decls: 36,\n  vars: 1,\n  consts: [[1, \"boxx\"], [\"routerLink\", \"/accueil\"], [\"id\", \"container\", 1, \"containerr\"], [1, \"form-containerr\", \"sign-up-container\"], [\"method\", \"POST\", 3, \"formGroup\", \"submit\"], [\"type\", \"text\", \"placeholder\", \"Pr\\u00E9nom\", \"formControlName\", \"firstName\", 1, \"input-form\"], [\"type\", \"text\", \"placeholder\", \"Nom de famille\", \"formControlName\", \"lastName\", 1, \"input-form\"], [\"type\", \"email\", \"placeholder\", \"E-mail\", \"formControlName\", \"email\", 1, \"input-form\"], [\"type\", \"password\", \"placeholder\", \"Mot de passe\", \"formControlName\", \"password\", 1, \"input-form\"], [\"type\", \"password\", \"placeholder\", \"Confirmez le mot de passe\", \"formControlName\", \"passwordConfirm\", 1, \"input-form\"], [1, \"group\"], [\"id\", \"check\", \"type\", \"checkbox\", \"unchecked\", \"\", \"formControlName\", \"terms\"], [\"for\", \"check\"], [1, \"icon\"], [1, \"overlay-container\"], [1, \"overlay\"], [1, \"overlay-panel\", \"overlay-right\"], [\"routerLink\", \"/log\"]],\n  template: function SignupComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"span\", 1)(2, \"b\");\n      i0.ɵɵtext(3, \"RETOURNEZ \\u00C0 LA PAGE D'ACCUEIL\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(4, \"div\", 2)(5, \"div\", 3)(6, \"form\", 4);\n      i0.ɵɵlistener(\"submit\", function SignupComponent_Template_form_submit_6_listener() {\n        return ctx.submit();\n      });\n      i0.ɵɵelementStart(7, \"h1\");\n      i0.ɵɵtext(8, \"S'INSCRIRE\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(9, \"br\")(10, \"br\")(11, \"input\", 5)(12, \"input\", 6)(13, \"input\", 7)(14, \"input\", 8)(15, \"input\", 9)(16, \"br\")(17, \"br\");\n      i0.ɵɵelementStart(18, \"div\", 10);\n      i0.ɵɵelement(19, \"input\", 11);\n      i0.ɵɵelementStart(20, \"label\", 12);\n      i0.ɵɵelement(21, \"span\", 13);\n      i0.ɵɵtext(22, \" J'accepte les termes et conditions\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(23, \"br\")(24, \"br\");\n      i0.ɵɵelementStart(25, \"button\");\n      i0.ɵɵtext(26, \"S'INSCRIRE\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(27, \"div\", 14)(28, \"div\", 15)(29, \"div\", 16)(30, \"h1\");\n      i0.ɵɵtext(31, \"Avez vous d\\u00E9j\\u00E0 un compte ?\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"p\");\n      i0.ɵɵtext(33, \"Connectez-vous en cliquant sur ce bouton\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"button\", 17);\n      i0.ɵɵtext(35, \"Connexion\");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"formGroup\", ctx.signupForm);\n    }\n  },\n  dependencies: [i2.RouterLink, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.CheckboxControlValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.FormControlName],\n  styles: [\"*[_ngcontent-%COMP%] {\\r\\n  box-sizing: border-box;\\r\\n}\\r\\n\\r\\n.boxx[_ngcontent-%COMP%] {\\r\\n  background: #e0ffff;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  flex-direction: column;\\r\\n  font-family: \\\"Montserrat\\\", sans-serif;\\r\\n  height: 100vh;\\r\\n  margin: 0px 0 0px;\\r\\n}\\r\\n\\r\\nh1[_ngcontent-%COMP%] {\\r\\n  font-weight: bold;\\r\\n  margin: 0;\\r\\n}\\r\\n\\r\\np[_ngcontent-%COMP%] {\\r\\n  font-size: 14px;\\r\\n  font-weight: 100;\\r\\n  line-height: 20px;\\r\\n  letter-spacing: 0.5px;\\r\\n  margin: 20px 0 30px;\\r\\n}\\r\\n\\r\\nspan[_ngcontent-%COMP%] {\\r\\n  font-size: 12px;\\r\\n}\\r\\n\\r\\na[_ngcontent-%COMP%] {\\r\\n  color: #333;\\r\\n  font-size: 14px;\\r\\n  text-decoration: none;\\r\\n  margin: 15px 0;\\r\\n}\\r\\n\\r\\nbutton[_ngcontent-%COMP%] {\\r\\n  border-radius: 20px;\\r\\n  border: 1px solid #00cccc;\\r\\n  background-color: #00cccc;\\r\\n  color: #ffffff;\\r\\n  font-size: 12px;\\r\\n  font-weight: bold;\\r\\n  padding: 12px 45px;\\r\\n  letter-spacing: 1px;\\r\\n  text-transform: uppercase;\\r\\n  transition: transform 80ms ease-in;\\r\\n}\\r\\n\\r\\nform[_ngcontent-%COMP%] {\\r\\n  background-color: #ffffff;\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n  flex-direction: column;\\r\\n  padding: 0 50px;\\r\\n  height: 100%;\\r\\n  text-align: center;\\r\\n}\\r\\n\\r\\n.input-form[_ngcontent-%COMP%] {\\r\\n  background-color: #eee;\\r\\n  border: none;\\r\\n  padding: 12px 15px;\\r\\n  margin: 8px 0;\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\n.containerr[_ngcontent-%COMP%] {\\r\\n  background-color: #fff;\\r\\n  border-radius: 10px;\\r\\n  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);\\r\\n  position: relative;\\r\\n  overflow: hidden;\\r\\n  width: 70%;\\r\\n  max-width: 100%;\\r\\n  min-height: 80%;\\r\\n}\\r\\n\\r\\n.form-container[_ngcontent-%COMP%] {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  left: 50%;\\r\\n  width: 50%;\\r\\n  height: 100%;\\r\\n}\\r\\n\\r\\n.overlay-container[_ngcontent-%COMP%] {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  height: 100%;\\r\\n  left: 0;\\r\\n  width: 50%;\\r\\n  z-index: 2;\\r\\n}\\r\\n\\r\\n.overlay[_ngcontent-%COMP%] {\\r\\n  background: #00cccc;\\r\\n  background: linear-gradient(to right, #00cccc, #d5f6f6);\\r\\n  background-repeat: no-repeat;\\r\\n  background-size: cover;\\r\\n  background-position: 0 0;\\r\\n  color: #ffffff;\\r\\n  position: relative;\\r\\n  left: -100%;\\r\\n  height: 100%;\\r\\n  width: 200%;\\r\\n}\\r\\n\\r\\n.overlay-panel[_ngcontent-%COMP%] {\\r\\n  position: absolute;\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n  flex-direction: column;\\r\\n  padding: 0 40px;\\r\\n  text-align: center;\\r\\n  top: 0;\\r\\n  height: 100%;\\r\\n  width: 50%;\\r\\n}\\r\\n\\r\\n.overlay-right[_ngcontent-%COMP%] {\\r\\n  right: 0;\\r\\n}\\r\\n\\r\\n.social-container[_ngcontent-%COMP%] {\\r\\n  margin: 50px 0;\\r\\n}\\r\\n\\r\\n.social-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\r\\n  border: 1px solid #dddddd;\\r\\n  border-radius: 50%;\\r\\n  display: inline-flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  margin: 0 5px;\\r\\n  height: 40px;\\r\\n  width: 40px;\\r\\n}\\r\\n\\r\\nbutton[_ngcontent-%COMP%]:hover {\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\nspan[_ngcontent-%COMP%] {\\r\\n  position: absolute;\\r\\n  top: 10px;\\r\\n  left: 10px;\\r\\n  color: #00cccc;\\r\\n}\\r\\nspan[_ngcontent-%COMP%]:hover {\\r\\n  cursor: pointer;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9zaWdudXAvc2lnbnVwLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxtQkFBbUI7RUFDbkIsYUFBYTtFQUNiLHVCQUF1QjtFQUN2QixtQkFBbUI7RUFDbkIsc0JBQXNCO0VBQ3RCLHFDQUFxQztFQUNyQyxhQUFhO0VBQ2IsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLFNBQVM7QUFDWDs7QUFFQTtFQUNFLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsaUJBQWlCO0VBQ2pCLHFCQUFxQjtFQUNyQixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsV0FBVztFQUNYLGVBQWU7RUFDZixxQkFBcUI7RUFDckIsY0FBYztBQUNoQjs7QUFFQTtFQUNFLG1CQUFtQjtFQUNuQix5QkFBeUI7RUFDekIseUJBQXlCO0VBQ3pCLGNBQWM7RUFDZCxlQUFlO0VBQ2YsaUJBQWlCO0VBQ2pCLGtCQUFrQjtFQUNsQixtQkFBbUI7RUFDbkIseUJBQXlCO0VBQ3pCLGtDQUFrQztBQUNwQzs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixzQkFBc0I7RUFDdEIsZUFBZTtFQUNmLFlBQVk7RUFDWixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2IsV0FBVztBQUNiOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLG1CQUFtQjtFQUNuQiw0RUFBNEU7RUFDNUUsa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixVQUFVO0VBQ1YsZUFBZTtFQUNmLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsTUFBTTtFQUNOLFNBQVM7RUFDVCxVQUFVO0VBQ1YsWUFBWTtBQUNkOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLE1BQU07RUFDTixZQUFZO0VBQ1osT0FBTztFQUNQLFVBQVU7RUFDVixVQUFVO0FBQ1o7O0FBRUE7RUFDRSxtQkFBbUI7RUFFbkIsdURBQXVEO0VBQ3ZELDRCQUE0QjtFQUM1QixzQkFBc0I7RUFDdEIsd0JBQXdCO0VBQ3hCLGNBQWM7RUFDZCxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLFlBQVk7RUFDWixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsc0JBQXNCO0VBQ3RCLGVBQWU7RUFDZixrQkFBa0I7RUFDbEIsTUFBTTtFQUNOLFlBQVk7RUFDWixVQUFVO0FBQ1o7O0FBRUE7RUFDRSxRQUFRO0FBQ1Y7O0FBRUE7RUFDRSxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLGtCQUFrQjtFQUNsQixvQkFBb0I7RUFDcEIsdUJBQXVCO0VBQ3ZCLG1CQUFtQjtFQUNuQixhQUFhO0VBQ2IsWUFBWTtFQUNaLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsU0FBUztFQUNULFVBQVU7RUFDVixjQUFjO0FBQ2hCO0FBQ0E7RUFDRSxlQUFlO0FBQ2pCIiwic291cmNlc0NvbnRlbnQiOlsiKiB7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxufVxyXG5cclxuLmJveHgge1xyXG4gIGJhY2tncm91bmQ6ICNlMGZmZmY7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgZm9udC1mYW1pbHk6IFwiTW9udHNlcnJhdFwiLCBzYW5zLXNlcmlmO1xyXG4gIGhlaWdodDogMTAwdmg7XHJcbiAgbWFyZ2luOiAwcHggMCAwcHg7XHJcbn1cclxuXHJcbmgxIHtcclxuICBmb250LXdlaWdodDogYm9sZDtcclxuICBtYXJnaW46IDA7XHJcbn1cclxuXHJcbnAge1xyXG4gIGZvbnQtc2l6ZTogMTRweDtcclxuICBmb250LXdlaWdodDogMTAwO1xyXG4gIGxpbmUtaGVpZ2h0OiAyMHB4O1xyXG4gIGxldHRlci1zcGFjaW5nOiAwLjVweDtcclxuICBtYXJnaW46IDIwcHggMCAzMHB4O1xyXG59XHJcblxyXG5zcGFuIHtcclxuICBmb250LXNpemU6IDEycHg7XHJcbn1cclxuXHJcbmEge1xyXG4gIGNvbG9yOiAjMzMzO1xyXG4gIGZvbnQtc2l6ZTogMTRweDtcclxuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XHJcbiAgbWFyZ2luOiAxNXB4IDA7XHJcbn1cclxuXHJcbmJ1dHRvbiB7XHJcbiAgYm9yZGVyLXJhZGl1czogMjBweDtcclxuICBib3JkZXI6IDFweCBzb2xpZCAjMDBjY2NjO1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMGNjY2M7XHJcbiAgY29sb3I6ICNmZmZmZmY7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIHBhZGRpbmc6IDEycHggNDVweDtcclxuICBsZXR0ZXItc3BhY2luZzogMXB4O1xyXG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XHJcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDgwbXMgZWFzZS1pbjtcclxufVxyXG5cclxuZm9ybSB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBwYWRkaW5nOiAwIDUwcHg7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuLmlucHV0LWZvcm0ge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNlZWU7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIHBhZGRpbmc6IDEycHggMTVweDtcclxuICBtYXJnaW46IDhweCAwO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4uY29udGFpbmVyciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcclxuICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gIGJveC1zaGFkb3c6IDAgMTRweCAyOHB4IHJnYmEoMCwgMCwgMCwgMC4yNSksIDAgMTBweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4yMik7XHJcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgd2lkdGg6IDcwJTtcclxuICBtYXgtd2lkdGg6IDEwMCU7XHJcbiAgbWluLWhlaWdodDogODAlO1xyXG59XHJcblxyXG4uZm9ybS1jb250YWluZXIge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB0b3A6IDA7XHJcbiAgbGVmdDogNTAlO1xyXG4gIHdpZHRoOiA1MCU7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG59XHJcblxyXG4ub3ZlcmxheS1jb250YWluZXIge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB0b3A6IDA7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIGxlZnQ6IDA7XHJcbiAgd2lkdGg6IDUwJTtcclxuICB6LWluZGV4OiAyO1xyXG59XHJcblxyXG4ub3ZlcmxheSB7XHJcbiAgYmFja2dyb3VuZDogIzAwY2NjYztcclxuICBiYWNrZ3JvdW5kOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzAwY2NjYywgI2Q1ZjZmNik7XHJcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjMDBjY2NjLCAjZDVmNmY2KTtcclxuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xyXG4gIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XHJcbiAgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAwO1xyXG4gIGNvbG9yOiAjZmZmZmZmO1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICBsZWZ0OiAtMTAwJTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgd2lkdGg6IDIwMCU7XHJcbn1cclxuXHJcbi5vdmVybGF5LXBhbmVsIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgcGFkZGluZzogMCA0MHB4O1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICB0b3A6IDA7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHdpZHRoOiA1MCU7XHJcbn1cclxuXHJcbi5vdmVybGF5LXJpZ2h0IHtcclxuICByaWdodDogMDtcclxufVxyXG5cclxuLnNvY2lhbC1jb250YWluZXIge1xyXG4gIG1hcmdpbjogNTBweCAwO1xyXG59XHJcblxyXG4uc29jaWFsLWNvbnRhaW5lciBhIHtcclxuICBib3JkZXI6IDFweCBzb2xpZCAjZGRkZGRkO1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIG1hcmdpbjogMCA1cHg7XHJcbiAgaGVpZ2h0OiA0MHB4O1xyXG4gIHdpZHRoOiA0MHB4O1xyXG59XHJcblxyXG5idXR0b246aG92ZXIge1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuc3BhbiB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogMTBweDtcclxuICBsZWZ0OiAxMHB4O1xyXG4gIGNvbG9yOiAjMDBjY2NjO1xyXG59XHJcbnNwYW46aG92ZXIge1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"names":["FormControl","FormGroup","Validators","SignupComponent","constructor","signupservice","router","toastr","connectionService","signupForm","firstName","required","minLength","pattern","lastName","email","password","passwordValidator","bind","passwordConfirm","matchPasswordValidator","terms","requiredTrue","ngOnInit","isUserLoggedIn$","subscribe","loggedIn","isLoggedIn","navigate","submit","invalid","controls","errors","error","enableHtml","value","signup","res","success","redirectUrl","control","passwordRegex","test","passwordInvalid","root","get","confirmPassword","passwordMismatch","i0","ɵɵdirectiveInject","i1","SignupService","i2","Router","i3","ToastrService","i4","ConnectionService","selectors","decls","vars","consts","template","SignupComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","SignupComponent_Template_form_submit_6_listener","ɵɵelement","ɵɵadvance","ɵɵproperty"],"sources":["C:\\Users\\Youssef EL-HAMRANI\\Desktop\\Node js\\NEW PFE\\project_pfe-frontend\\frontend\\src\\app\\components\\signup\\signup.component.ts","C:\\Users\\Youssef EL-HAMRANI\\Desktop\\Node js\\NEW PFE\\project_pfe-frontend\\frontend\\src\\app\\components\\signup\\signup.component.html"],"sourcesContent":["import { Component, OnInit } from \"@angular/core\";\nimport { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { SignupService } from \"src/app/services/signup.service\";\nimport { Router } from \"@angular/router\";\nimport { ToastrService } from \"ngx-toastr\";\nimport { AbstractControl } from \"@angular/forms\";\nimport { ConnectionService } from \"src/app/services/connection.service\";\n\n@Component({\n  selector: \"app-signup\",\n  templateUrl: \"./signup.component.html\",\n  styleUrls: [\"./signup.component.css\"],\n})\nexport class SignupComponent implements OnInit {\n  isLoggedIn!: boolean;\n\n  signupForm: FormGroup = new FormGroup({\n    firstName: new FormControl(\"\", [\n      Validators.required,\n      Validators.minLength(2),\n      Validators.pattern(/^[a-zA-Z\\s]*$/),\n    ]),\n    lastName: new FormControl(\"\", [\n      Validators.required,\n      Validators.minLength(2),\n      Validators.pattern(/^[a-zA-Z\\s-]*$/),\n    ]),\n    email: new FormControl(\"\", [Validators.required, Validators.email]),\n\n    password: new FormControl(\"\", [\n      Validators.required,\n      this.passwordValidator.bind(this),\n    ]),\n    passwordConfirm: new FormControl(\"\", [\n      Validators.required,\n      this.matchPasswordValidator.bind(this),\n    ]),\n    terms: new FormControl(false, Validators.requiredTrue),\n  });\n\n  constructor(\n    private signupservice: SignupService,\n    private router: Router,\n    private toastr: ToastrService,\n    private connectionService: ConnectionService\n  ) {}\n\n  ngOnInit(): void {\n    this.connectionService.isUserLoggedIn$.subscribe(\n      (loggedIn) => (this.isLoggedIn = loggedIn)\n    );\n\n    if (this.isLoggedIn == true) {\n      this.router.navigate([\"/accueil\"]);\n    }\n  }\n\n  submit() {\n    if (this.signupForm.invalid) {\n      if (this.signupForm.controls[\"firstName\"].errors) {\n        this.toastr.error(\"Prénom invalide\", \"Erreur\");\n        return;\n      }\n\n      if (this.signupForm.controls[\"lastName\"].errors) {\n        this.toastr.error(\"Nom de famille invalide\", \"Erreur\");\n        return;\n      }\n      if (this.signupForm.controls[\"email\"].errors) {\n        this.toastr.error(\"Adresse e-mail invalide\", \"Erreur\");\n        return;\n      }\n\n      if (this.signupForm.controls[\"password\"].errors) {\n        this.toastr.error(\n          \"Le mot de passe doit répondre aux exigences suivantes :<br>\" +\n            \"1 - Au moins 10 caractères<br>\" +\n            \"2 - Au moins 1 lettre majuscule<br>\" +\n            \"3 - Au moins 1 lettre minuscule<br>\" +\n            \"4 - Au moins 1 caractère spécial<br>\" +\n            \"5 - Au moins 1 chiffre\",\n          \"Password Error\",\n          { enableHtml: true }\n        );\n        return;\n      }\n\n      if (this.signupForm.controls[\"passwordConfirm\"].errors) {\n        this.toastr.error(\"Les mots de passe ne correspondent pas\", \"Erreur\");\n        return;\n      }\n\n      if (this.signupForm.controls[\"terms\"].value !== true) {\n        this.toastr.error(\n          \"Veuillez accepter les termes et conditions\",\n          \"Erreur\"\n        );\n        return;\n      }\n    }\n\n    const value = this.signupForm.value;\n    this.signupservice.signup(value).subscribe((res) => {\n      if (res.success) {\n        this.router.navigate([res.redirectUrl]);\n        this.toastr.success(\n          \"Vérifiez votre courriel! <br>\" +\n            \"Un lien pour confirmer votre compte vous a été envoyé<br>\",\n          \"\",\n          { enableHtml: true }\n        );\n      } else if (!res.success) {\n        this.toastr.error(\"L'adresse e-mail existe déjà!\", \"\");\n      }\n    });\n  }\n\n  passwordValidator(control: FormControl): { [key: string]: boolean } | null {\n    const password = control.value;\n    const passwordRegex =\n      /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=-_*]).{10,}$/;\n\n    if (!passwordRegex.test(password)) {\n      return { passwordInvalid: true };\n    }\n\n    return null;\n  }\n\n  matchPasswordValidator(\n    control: AbstractControl\n  ): { [key: string]: boolean } | null {\n    const password = control.root.get(\"password\");\n    const confirmPassword = control.value;\n    if (password && confirmPassword !== password.value) {\n      return { passwordMismatch: true };\n    }\n    return null;\n  }\n}\n","<div class=\"boxx\">\n  <span routerLink=\"/accueil\"><b>RETOURNEZ À LA PAGE D'ACCUEIL</b></span>\n  <div class=\"containerr\" id=\"container\">\n    <div class=\"form-containerr sign-up-container\">\n      <form method=\"POST\" [formGroup]=\"signupForm\" (submit)=\"submit()\">\n        <h1>S'INSCRIRE</h1>\n        <br />\n        <br />\n        <input\n          class=\"input-form\"\n          type=\"text\"\n          placeholder=\"Prénom\"\n          formControlName=\"firstName\"\n        />\n        <input\n          class=\"input-form\"\n          type=\"text\"\n          placeholder=\"Nom de famille\"\n          formControlName=\"lastName\"\n        />\n        <input\n          class=\"input-form\"\n          type=\"email\"\n          placeholder=\"E-mail\"\n          formControlName=\"email\"\n        />\n        <input\n          class=\"input-form\"\n          type=\"password\"\n          placeholder=\"Mot de passe\"\n          formControlName=\"password\"\n        />\n        <input\n          class=\"input-form\"\n          type=\"password\"\n          placeholder=\"Confirmez le mot de passe\"\n          formControlName=\"passwordConfirm\"\n        />\n\n        <br />\n        <br />\n        <div class=\"group\">\n          <input id=\"check\" type=\"checkbox\" unchecked formControlName=\"terms\" />\n          <label for=\"check\"\n            ><span class=\"icon\"></span> J'accepte les termes et\n            conditions</label\n          >\n        </div>\n        <br />\n        <br />\n        <button>S'INSCRIRE</button>\n      </form>\n    </div>\n    <div class=\"overlay-container\">\n      <div class=\"overlay\">\n        <div class=\"overlay-panel overlay-right\">\n          <h1>Avez vous déjà un compte ?</h1>\n          <p>Connectez-vous en cliquant sur ce bouton</p>\n          <button routerLink=\"/log\">Connexion</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}